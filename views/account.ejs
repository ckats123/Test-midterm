<!DOCTYPE html>
<html lang="en">

<head>
  <title>Home Page</title>

  <meta charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gabarito:wght@400;500;600&family=Young+Serif&display=swap" rel="stylesheet">

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/21c6db8c84.js" crossorigin="anonymous"></script>
</head>
<body>
  <%- include('partials/nav') %>
  <header>
    <h1>Hire expert Programmers for any job</h1>
    <img src="./images/home.png" alt="image of woman on computer">
  </header>
  <!--Just placeholders with dummy data in the main element-->
  <% if (is_seller) { %>
  <main>
    <!--Profile-->
    <section id="profile">
      <h2>Bio</h2>
      <p>Short description about the person.</p>
      <ul>
        <li>E-mail: <%= userInfo.email %></li>
        <li>Name: <%= userInfo.name %></li>
        <li>Location: <%= userInfo.location %></li>
      </ul>
      <form action="/logout" method="POST" style="text-align: center;">
        <button type="submit">Logout</button>
      </form>
    </section>
    <!--Transaction Log-->
    <section id="transaction-log">
      <h2>Transactions Log</h2>
      <table>
        <tr>
          <th>Seller</th>
          <th>Buyer</th>
          <th>Purchase Date</th>
          <th>Amount</th>
        </tr>
            <% mySalesLog.forEach(transaction => { %>
              <tr>
              <td>
                <%= transaction.seller_id %>
              </td>
              <td>
                <%= transaction.buyer_id %>
              </td>
              <td>
                <%= transaction.purchase_date %>
              </td>
              <td>
                <%= transaction.final_cost %>
              </td>
              </tr>
            <% }); %>
            <% myBuyLog.forEach(transaction => { %>
              <tr>
              <td>
                <%= transaction.seller_id %>
              </td>
              <td>
                <%= transaction.buyer_id %>
              </td>
              <td>
                <%= transaction.purchase_date %>
              </td>
              <td>
                <%= transaction.final_cost %>
              </td>
              </tr>
            <% }); %>
      </table>
    </section>
    <!--Reviews-->
    <section id="reviews">
      <h2>Reviews</h2>
      <% myReviews.forEach(review => { %>
        <article>
          <h3>Rating: <%= review.rating %></h3>
          <p>Listing: <a href="<%= '/listings/' + review.id %>"><%= review.title %></a></p>
          <p>Message: <%= review.message %></p>
          <p>Transaction number: <%= review.transaction_id %></p>
        </article>
      <% }); %>
    </section>
    <!--Sellers Listings-->
    <section id="sellers-listings">
      <h2>My Listings</h2>
      <ul>
        <% myListings.forEach(listing => { %>
          <div class="listing-tile" style = "border: 1px solid black; margin: 5px; padding:5px">
            <img src = <%= listing.photo_url %>>
            <h2><%= listing.title %></h2>
            <p>Price: $<%= listing.price %></p>
            <p>Description: <%= listing.description %></p>
            <p>Details: <a href="/listings/<%= listing.id %>">Read more</a></p>
            <p>Date Listed: <%= listing.date_listed %></p>
            <p>Is Active: <%= listing.is_active ? 'Yes' : 'No' %></p>
          </div>
        <% }); %>
      </ul>
    </section>
  </main>
  <% } else { %>
    <section id="profile">
      <h2>Bio</h2>
      <p>Short description about the person.</p>
      <ul>
        <li>E-mail: <%= userInfo.email %></li>
        <li>Name: <%= userInfo.name %></li>
      </ul>
      <form action="/logout" method="POST" style="text-align: center;">
        <button type="submit">Logout</button>
      </form>
    </section>
    <section id="transaction-log">
      <h2>Transactions Log</h2>
      <table>
        <tr>
          <th>Seller</th>
          <th>Buyer</th>
          <th>Purchase Date</th>
          <th>Amount</th>
        </tr>
            <% myBuyLog.forEach(transaction => { %>
              <tr>
              <td>
                <%= transaction.seller_id %>
              </td>
              <td>
                <%= transaction.buyer_id %>
              </td>
              <td>
                <%= transaction.purchase_date %>
              </td>
              <td>
                <%= transaction.final_cost %>
              </td>
              </tr>
            <% }); %>
      </table>
    </section>
  <% }; %>
  <%- include('partials/footer') %>
</body>
</html>
